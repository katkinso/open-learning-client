(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,a){e.exports=a(64)},64:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(31),c=a.n(r),i=a(5),l=a(6),o=a(8),m=a(7),u=a(9),d=a(2),h=a(12),p=a(32),f=a(40);f.defaults.baseURL="https://open-learning-api.herokuapp.com/",f.defaults.headers.post["Content-Type"]="application/json",f.defaults.withCredentials=!0;var E={authenticate:function(e,t){f({method:"post",url:"/users/authenticate",data:e}).then((function(e){t(null,e)})).catch((function(e){t(e)}))},me:function(e){f({method:"get",url:"/users/me"}).then((function(t){e(null,t)})).catch((function(t){e(t)}))},logout:function(e){f({method:"get",url:"/users/logout"}).then((function(t){console.log(t),e(null,t)})).catch((function(t){e(t)}))},sessions:function(e,t){f({method:"get",url:"/sessions"}).then((function(e){t(null,e)})).catch((function(e){t(e)}))},session:function(e,t){f({method:"get",url:"/sessions/".concat(e)}).then((function(e){t(null,e)})).catch((function(e){t(e)}))}},g=function(e){var t="btn btn-primary ".concat(e.for);return s.a.createElement("button",{type:e.type,onClick:e.action,className:t},e.text)},v=function(e){return s.a.createElement("input",{id:e.id,type:e.type,className:"form-control",placeholder:e.placeholder,value:e.value,onChange:e.onChange})},b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",error:"",message:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target.value,a=e.target.id;this.setState(Object(p.a)({},a,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),E.authenticate({email:this.state.email,password:this.state.password},(function(e,a){e?t.setState({error:"that's not right"}):t.props.history.push("/dashboard")}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container login"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm"}),s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("div",{className:"card align-middle shadow-sm bg-white rounded my-5"},s.a.createElement("div",{className:"card-body p-5"},s.a.createElement("div",{className:"mx-auto pb-3 logo"},s.a.createElement("img",{src:"/assets/images/logo.png",width:"50px",alt:"logo"})),s.a.createElement("p",null,this.state.error),s.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("div",{className:"form-group"},s.a.createElement(v,{id:"email",type:"email",placeholder:"email",value:this.state.email,onChange:function(t){return e.handleInputChange(t)}})),s.a.createElement("div",{className:"form-group pb-3"},s.a.createElement(v,{id:"password",type:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleInputChange(t)}})),s.a.createElement(g,{type:"submit",text:"LOG IN",for:"login"}))))),s.a.createElement("div",{className:"col-sm"})))}}]),t}(n.Component),N=Object(h.f)(b),y=a(16),j=a(21),w=a.n(j),x=function(){return(new y.a).get("connect.sid")},O=function(e){return w()(e).local().format("YYYY MMM DD h:mm A")},S=function(e){return w()(e).local().format("dddd, MMMM DD @ h:mmA")},k=Object(h.f)((function(e){x()||e.history.push({pathname:"/authenticate",state:{error:"access denied"}});var t=e.user;return s.a.createElement("header",{className:"py-2 px-2 header-top"},s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center"},s.a.createElement("div",{className:"col-4 p-1"},s.a.createElement(d.b,{to:"/dashboard"},s.a.createElement("img",{src:"/assets/images/logo.png",width:"40px",alt:"logo"}))),s.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"},s.a.createElement("img",{src:"/assets/images/feathers.png",alt:"avatar",className:"avatar"}),s.a.createElement("span",{className:"px-2"},s.a.createElement(d.b,{className:"text-capitalize font-weight-bold",to:"/profile"},t.firstName," ",t.lastName),s.a.createElement("br",null),s.a.createElement("span",{className:"text-sm-muted font-weight-bold"},t.email)),s.a.createElement(g,{action:e.logout,type:"button",text:"logout"})))))})),C=function(e){var t=e.nextSession,a=t?S(t.dateTime):"";return s.a.createElement("header",{className:"py-3 header-sub border-bottom"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center"},s.a.createElement("div",{className:"col-4 pt-1"},t?s.a.createElement("div",null,s.a.createElement("h1",null,"YOUR NEXT SESSION"),s.a.createElement("h2",null,s.a.createElement(d.b,{className:"text-brighter-blue",to:"/session/".concat(t.id)},t.name)),s.a.createElement("h3",{className:"text-sm-muted"},"Total Spots: ",t.totalSpots)):s.a.createElement("h2",{className:"text-brighter-blue"},"No upcoming sessions")),s.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"},s.a.createElement("span",{className:"font-weight-bold"},a)))))},M=function(e){var t=e.notification;return s.a.createElement("header",{className:"py-3 header-sub"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center"},s.a.createElement("div",{className:"col-5 pt-1"},s.a.createElement("span",{className:"notice"},t)),s.a.createElement("div",{className:"col-3 d-flex justify-content-end align-items-center"}))))},D=function(e){var t=e.session,a=e.isRegistered,n=e.index,r=O(t.dateTime),c="container course-list-item";return c+=n?"":" first",c+=a?c+" isRegistered":"",s.a.createElement("div",{className:c},s.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center py-3"},s.a.createElement("div",{className:"col-1 text-center"},s.a.createElement("p",{className:"font-weight-bold text-uppercase small"},r," "),a?s.a.createElement("img",{src:"/assets/images/registered.png",width:"25px",alt:"logo"}):s.a.createElement("img",{src:"/assets/images/1x1.png",width:"25px",alt:""})),s.a.createElement("div",{className:"col-7"},s.a.createElement(d.b,{className:"small font-weight-bold align-top",to:"/session/".concat(t.id)},t.name),s.a.createElement("br",null),s.a.createElement("span",{className:"small"},"Total Spots: ",t.totalSpots)),s.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"})))},T=function(e){var t=e.sessions,a=e.userSessions;return s.a.createElement("div",{className:"container course-list mt-5"},t.map((function(e,t){return s.a.createElement(D,{index:t,key:e.id,session:e,isRegistered:a.includes(e.id)})})))},I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e)))._isMounted=!1,a.state={message:"",user:{id:"",email:"",firstName:"",lastName:"",sessions:[],nextSession:""},sessions:[],notification:"Remember, Thursday is a holiday! Don\u2019t forget to submit your answers to the latest survey"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,E.me((function(t,a){if(!t){var n=a.data,s=[];n.sessions.map((function(e){s.push(e.id)})),n.nextSession=n.sessions[0],n.sessions=s,e._isMounted&&e.setState({user:n})}})),E.sessions("info",(function(t,a){if(!t){var n=a.data;e._isMounted&&e.setState({sessions:n})}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"logout",value:function(){var e=this;E.logout((function(t,a){t||e.props.history.push({pathname:"/authenticate",state:{message:"logged out"}})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.sessions,r=t.notification;return s.a.createElement("div",{className:"container-fluid px-0 pb-5"},s.a.createElement(k,{user:a,logout:function(){return e.logout()}}),s.a.createElement(C,{nextSession:a.nextSession}),s.a.createElement(M,{notification:r}),s.a.createElement(T,{sessions:n,userSessions:a.sessions}))}}]),t}(n.Component),R=Object(h.f)(I),Y=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},"404 not found")}}]),t}(n.Component),_=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={session:""},E.me((function(e,t){if(e)a.props.history.push({pathname:"/authenticate",state:{error:"access denied"}});else{var n=t.data;a.setState({user:n})}}));var n=a.props.match.params.id;return E.session(n,(function(e,t){if(!e){var n=t.data;a.setState({session:n})}})),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.session;return s.a.createElement("div",{className:"container-fluid p-0"},e.error,e.name," ",e.description)}}]),t}(n.Component),U=Object(h.f)(_),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={user:{id:"",email:"",firstName:"",lastName:""}},E.me((function(e,t){if(e)a.props.history.push({pathname:"/authenticate",state:{error:"access denied"}});else{var n=t.data;a.setState({user:n})}})),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user;return console.log({user:t}),s.a.createElement("div",{className:"container-fluid px-0 pb-5"},s.a.createElement(k,{user:t,logout:function(){return e.logout()}}),s.a.createElement(M,null),s.a.createElement("div",{className:"container mt-5"},s.a.createElement("p",null,t.firstName),s.a.createElement("p",null,t.lastName),s.a.createElement("p",null,t.email)))}}]),t}(n.Component),A=Object(h.f)(W),B=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement(h.c,null,s.a.createElement(h.a,{exact:!0,path:"/authenticate"},s.a.createElement(N,null)),s.a.createElement(h.a,{exact:!0,path:"/dashboard"},s.a.createElement(R,null)),s.a.createElement(h.a,{exact:!0,path:"/"},s.a.createElement(N,null)),s.a.createElement(h.a,{path:"/session/:id"},s.a.createElement(U,null)),s.a.createElement(h.a,{path:"/profile"},s.a.createElement(A,null)),s.a.createElement(h.a,{path:"/"},s.a.createElement(Y,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.dca495ba.chunk.js.map